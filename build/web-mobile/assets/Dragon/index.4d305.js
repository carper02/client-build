window.__require=function t(e,n,o){function i(c,a){if(!n[c]){if(!e[c]){var l=c.split("/");if(l=l[l.length-1],!e[l]){var u="function"==typeof __require&&__require;if(!a&&u)return u(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+c+"'")}c=l}var s=n[c]={exports:{}};e[c][0].call(s.exports,function(t){return i(e[c][1][t]||t)},s,s.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({"Dragon.Cmd":[function(t,e,n){"use strict";cc._RF.push(e,"22d21UcOBRPArzlLWsd0ynQ","Dragon.Cmd");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.cmd=void 0;var r,c=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),a=t("../../Lobby/LobbyScript/Script/networks/Network.OutPacket");cc._decorator.ccclass,function(t){var e=function(t){function e(e){var n=t.call(this,e)||this;return n.ngayX2="",n.remain=0,n.currentMoney=0,n.freeSpin=0,n.lines="",n.currentRoom=0,n.ngayX2=n.getString(),n.remain=n.getByte(),n.currentMoney=n.getLong(),n.freeSpin=n.getByte(),n.lines=n.getString(),n.currentRoom=n.getByte(),n}return i(e,t),e}(c.default);t.ReceiveDateX2=e;var n=function(t){function e(e){var n=t.call(this,e)||this;return n.freeSpin=0,n.freeSpin=n.getByte(),n}return i(e,t),e}(c.default);t.ReceiveFreeDaiLy=n;var o=function(){function t(){}return t.SUBCRIBE=17003,t.UNSUBCRIBE=17004,t.CHANGE_BET=17005,t.PLAY=17001,t.UPDATE_POT=17002,t.AUTO=17006,t.FORCE_STOP_AUTO=17008,t.DATE_X2=17009,t.BIG_WIN=17010,t.FREE=17011,t.FREE_DAI_LY=17012,t.MINIMIZE=17013,t.UPDATE_ROOM_INFO=17022,t.OPEN_ITEM_MINI_GAME=17023,t.UPDATE_JACKPOT_SLOTS=10003,t.SUBCRIBE_HALL_SLOT=10001,t}();t.Code=o;var r=function(t){function e(e){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(o.SUBCRIBE),n.packHeader(),n.putByte(e),n.updateSize(),n}return i(e,t),e}(a.default);t.SendSubcribe=r;var l=function(t){function e(e){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(o.UNSUBCRIBE),n.packHeader(),n.putByte(e),n.updateSize(),n}return i(e,t),e}(a.default);t.SendUnSubcribe=l;var u=function(t){function e(e){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(o.PLAY),n.packHeader(),n.putString(e),n.updateSize(),n}return i(e,t),e}(a.default);t.SendPlay=u;var s=function(t){function e(e){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(o.CHANGE_BET),n.packHeader(),n.putLong(e),n.updateSize(),n}return i(e,t),e}(a.default);t.SendUpdateBet=s;var p=function(t){function e(e,n){var i=t.call(this)||this;return i.initData(100),i.setControllerId(1),i.setCmdId(o.OPEN_ITEM_MINI_GAME),i.packHeader(),i.putLong(e),i.putInt(n),i.updateSize(),i}return i(e,t),e}(a.default);t.sendOpenItemMiniGame=p;var d=function(t){function e(e){var n=t.call(this,e)||this;return n.jackpot=0,n.x2=0,n.jackpot=n.getLong(),n.x2=n.getByte(),n}return i(e,t),e}(c.default);t.ReceiveUpdatePot=d;var f=function(t){function e(e){var n=t.call(this,e)||this;n.currentBetValue=0,n.betValues=[],n.jackpotValues=[];for(var o=n.getShort(),i=0;i<o;i++)n.betValues.push(n.getLong());var r=n.getShort();for(i=0;i<r;i++)n.jackpotValues.push(n.getLong());return n.currentBetValue=n.getLong(),n}return i(e,t),e}(c.default);t.ReceiveRoomInfo=f;var h=function(t){function e(e){var n=t.call(this,e)||this;n.minigameId=0,n.miniGameType=0,n.mgMatrix=[],n.isFinished=!1,n.result=0,n.prize=0,n.gamePhase=0,n.minigameId=n.getLong(),n.miniGameType=n.getLong();for(var o=n.getShort(),i=0;i<o;i++)n.mgMatrix.push(n.getLong());return n.isFinished=n.getBool(),n.result=n.getLong(),n.prize=n.getLong(),n.gamePhase=n.getLong(),n}return i(e,t),e}(c.default);t.ReceiveItemMiniGameInfo=h;var y=function(t){function e(e){var n=t.call(this,e)||this;return n.pots="",n.pots=n.getString(),n}return i(e,t),e}(c.default);t.ResUpdateJackpotSlots=y;var b=function(t){function e(e){var n=t.call(this,e)||this;n.betValue=0,n.jackpotValues=[],n.betValue=n.getLong();for(var o=n.getShort(),i=0;i<o;i++)n.jackpotValues.push(n.getLong());return n}return i(e,t),e}(c.default);t.ReceiveUpdateBet=b;var g=function(t){function e(e){var n=t.call(this,e)||this;n.referenceId=0,n.result=0,n.matrix="",n.linesWin=[],n.prize=0,n.currentMoney=0,n.freeSpin=0,n.isFreeSpin=!1,n.itemsWild="",n.ratio=0,n.currentNumberFreeSpin=0,n.hasMiniGame=!1,n.miniGameId=0,n.miniGameType=0,n.freeSpinOption=0,n.minWild=0,n.maxWild=0,n.referenceId=n.getLong(),n.result=n.getByte(),n.matrix=n.getString();var o=n.getShort();n.linesWin=[];for(var i=0;i<o;i++)n.linesWin.push(n.getString());return n.prize=n.getLong(),n.currentMoney=n.getLong(),n.freeSpin=n.getInt(),n.isFreeSpin=n.getBool(),n.itemsWild=n.getString(),n.ratio=n.getByte(),n.currentNumberFreeSpin=n.getByte(),n.hasMiniGame=n.getBool(),n.miniGameId=n.getLong(),n.miniGameType=n.getLong(),n.freeSpinOption=n.getLong(),n.minWild=n.getLong(),n.maxWild=n.getLong(),n}return i(e,t),e}(c.default);t.ReceivePlay=g;var v=function(t){function e(){var e=t.call(this)||this;return e.initData(100),e.setControllerId(1),e.setCmdId(o.SUBCRIBE_HALL_SLOT),e.packHeader(),e.updateSize(),e}return i(e,t),e}(a.default);t.ReqSubcribeHallSlot=v}(r=n.cmd||(n.cmd={})),n.default=r,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"../../Lobby/LobbyScript/Script/networks/Network.OutPacket":void 0}],DragonController:[function(t,e,n){"use strict";cc._RF.push(e,"7462271VdFN4J38ivhu1fP1","DragonController");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../Loading/src/Configs"),a=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/BroadcastReceiver"),u=t("../../Lobby/LobbyScript/Script/common/Tween"),s=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),p=t("../../Lobby/LobbyScript/Script/networks/SlotNetworkClient"),d=t("./Dragon.Cmd"),f=t("./DuoFuFreeSpin"),h=cc._decorator,y=h.ccclass,b=h.property,g={2:"9",3:"10",4:"J",5:"Q",6:"K",7:"A",8:"Fish",9:"Turtle",10:"Tiger",11:"Bird",12:"Dragon",13:"Scatter",14:"Red Wild",15:"Gold Wild"},v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.betIdx=0,e.machine=null,e.walletLabel=null,e.lblFreeSpin=null,e.betLabel=null,e.winLabel=null,e.fortuneLabel=null,e.grandLabel=null,e.majorLabel=null,e.minorLabel=null,e.miniLabel=null,e.wayResultsLabel=null,e.changeMoneyBetBtn=null,e.addMoneyBtn=null,e.subMoneyBtn=null,e.machineSize=cc.v2(3,5),e.audioClick=null,e.uiClick=null,e.winSound=null,e.popupFreeSpin=null,e.block=!1,e.mIsTrial=!1,e.daiLyFreeSpin=0,e.result=null,e.currentNumberFreeSpin=0,e.listBet=[100,1e3,1e4,25e3,5e4,1e5,1e6],e.arrLineSelect=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],e.grid=[],e.grid2=[],e.currentWilds=[],e.wildType="Red Wild",e.spinCount=1,e.win=0,e.betCount=1,e.symbolEatArr=[],e.arrResult=[],e._isFreeSpin=!1,e._canShowPopupOption=!1,e}return i(e,t),e.prototype.start=function(){var t=this;this.machine.getComponent("Machine").createMachine(),this.createEmptyGrid(),p.default.getInstance().addOnClose(function(){t.onBtnBack()},this),p.default.getInstance().addListener(function(e){switch(new s.default(e).getCmdId()){case d.default.Code.FREE_DAI_LY:if(!t.mIsTrial){var n=new d.default.ReceiveFreeDaiLy(e);cc.log("[FREE_DAI_LY]: ",n),t.daiLyFreeSpin=n.freeSpin}break;case d.default.Code.DATE_X2:n=new d.default.ReceiveDateX2(e),cc.log("[DATE_X2]: ",n);break;case d.default.Code.CHANGE_BET:n=new d.default.ReceiveUpdateBet(e),t.updateJackpotValue(n.jackpotValues),cc.log("[UPDATE_BET]: ",n);case d.default.Code.UPDATE_ROOM_INFO:n=new d.default.ReceiveRoomInfo(e),cc.log("[UPDATE_ROOM_INFO]: ",n),t.updateRoomData(n);break;case d.default.Code.UPDATE_POT:n=new d.default.ReceiveUpdatePot(e),u.default.numberTo(t.fortuneLabel,n.jackpot,.3),cc.log("[UPDATE_POT]: ",n);break;case d.default.Code.PLAY:n=new d.default.ReceivePlay(e),cc.warn("[PLAY]: ",n),t.onSpinResult(n)}},this),p.default.getInstance().sendCheck(new d.default.ReqSubcribeHallSlot),l.default.register(l.default.USER_UPDATE_COIN,function(){u.default.numberTo(t.walletLabel,c.default.Login.Coin,.3),t.money=c.default.Login.Coin},this),l.default.send(l.default.USER_UPDATE_COIN),a.default.instance.showErrLoading("\u0110ang k\u1ebft n\u1ed1i t\u1edbi server..."),p.default.getInstance().checkConnect(function(){a.default.instance.showLoading(!1)}),p.default.getInstance().send(new d.default.SendSubcribe(this.betIdx)),this.onJoinRoom()},e.prototype.update=function(){this.block&&null!=this.result&&(this.informStop(),this.result=null)},e.prototype.updateRoomData=function(t){this.updateJackpotValue(t.jackpotValues),this.subMoneyBtn.interactable=this.betIdx>0,this.addMoneyBtn.interactable=this.betIdx<6},e.prototype.onBtnBack=function(){p.default.getInstance().send(new d.default.SendUnSubcribe(this.betIdx)),cc.audioEngine.stopAll(),a.default.instance.loadScene("Lobby")},e.prototype.onJoinRoom=function(){this.betLabel.string=this.listBet[this.betIdx].toLocaleString("vi-VN")},e.prototype.onBtnChangeMoneyBet=function(){cc.audioEngine.play(this.uiClick,!1,1),this.changeMoneyBetBtn.interactable=!1,this.subMoneyBtn.node.parent.active=!0},e.prototype.onBtnSub=function(){p.default.getInstance().send(new d.default.SendUnSubcribe(this.betIdx)),this.betIdx--,this.betIdx<=0&&(this.betIdx=0),this.subMoneyBtn.interactable=this.betIdx>0,this.addMoneyBtn.interactable=this.betIdx<6,p.default.getInstance().send(new d.default.SendUpdateBet(this.listBet[this.betIdx])),this.onJoinRoom()},e.prototype.onBtnAdd=function(){p.default.getInstance().send(new d.default.SendUnSubcribe(this.betIdx)),this.betIdx++,this.betIdx>=6&&(this.betIdx=6),this.subMoneyBtn.interactable=this.betIdx>0,this.addMoneyBtn.interactable=this.betIdx<6,cc.warn("bet",this.listBet[this.betIdx]),p.default.getInstance().send(new d.default.SendUpdateBet(this.listBet[this.betIdx])),this.onJoinRoom()},e.prototype.onCloseBtnChangeMoneyBet=function(){cc.audioEngine.play(this.uiClick,!1,1),this.subMoneyBtn.node.parent.active=!1,this.changeMoneyBetBtn.interactable=!0},e.prototype.updateJackpotValue=function(t){cc.audioEngine.play(this.uiClick,!1,1),this.miniLabel.string=t[0].toLocaleString("vi-VN"),this.minorLabel.string=t[1].toLocaleString("vi-VN"),this.majorLabel.string=t[2].toLocaleString("vi-VN"),this.grandLabel.string=t[3].toLocaleString("vi-VN")},e.prototype.createEmptyGrid=function(){this.grid=Array.from({length:5},function(){return Array(3).fill(null)}),this.grid2=Array.from({length:5},function(){return Array(3).fill(null)})},e.prototype.onSpinResult=function(t){var e=this;t.isFreeSpin&&(this._isFreeSpin=t.isFreeSpin),this.lblFreeSpin.string=t.currentNumberFreeSpin,this._canShowPopupOption=t.freeSpin>0,t.hasMiniGame&&this.playMiniGame(t),this.result=t,this.currentNumberFreeSpin=t.currentNumberFreeSpin;var n=this.convertToMatrix(t.matrix.split(","),5,3);this.grid=n,cc.log("Matrix Slot Duo Fu: ",n),!1===this.machine.getComponent("Machine").spinning?(this.win=t.prize,this.machine.getComponent("Machine").spin(),this.moveWildsUp(),this.machine.getComponent("Machine").moveWild(),this.machine.getComponent("Machine").createWild(this.grid),this.spinCount++,this.schedule(function(){!0===e.machine.getComponent("Machine").spinning&&(e.informStop(),e.machine.getComponent("Machine").lock())},2)):this.block||(this.block=!0,this.machine.getComponent("Machine").lock())},e.prototype.spin=function(){cc.audioEngine.play(this.audioClick,!1,1),c.default.Login.Coin<this.listBet[this.betIdx]*this.arrLineSelect.length?a.default.instance.alertDialog.showMsg(a.default.instance.getTextLang("txt_not_enough")):(p.default.getInstance().send(new d.default.SendPlay(this.arrLineSelect.toString())),this.winLabel.string="0",this._isFreeSpin||this.updateMoney(-this.listBet[this.betIdx]),this.symbolEatArr=[],this.arrResult=[],this.block=!1,this.subMoneyBtn.node.parent.active=!1,this.changeMoneyBetBtn.interactable=!1,this.subMoneyBtn.node.parent.active=!1,this.changeMoneyBetBtn.interactable=!1)},e.prototype.playMiniGame=function(){},e.prototype.moveWildsUp=function(){this.currentWilds=this.currentWilds.map(function(t){return{row:t.row,col:t.col-1}}).filter(function(t){return t.col>=0})},e.prototype.informStop=function(){var t=this,e=this.grid;this.machine.getComponent("Machine").stop(e),this.unscheduleAllCallbacks(),setTimeout(function(){t.machine.getComponent("Machine").showEfx(t.symbolEatArr),t.updateMoney(t.win),t.winLabel.string=t.win.toString(),t.changeMoneyBetBtn.interactable=!0,t.arrResult.forEach(function(e,n){t.scheduleOnce(function(){t.wayResultsLabel.string=e},1*n),0==n&&cc.tween(t.wayResultsLabel.node.parent).set({active:!0,scale:0}).to(.1,{scale:.9}).delay(2).to(.1,{scale:0}).start()}),(t.spinCount-1)%3!=0&&t.machine.getComponent("Machine").spawnCoin(),t.arrResult.length>0&&cc.audioEngine.play(t.winSound,!1,1)},1500),this.scheduleOnce(function(){if(t._canShowPopupOption){var e={option:t.result.freeSpinOption};t.popupFreeSpin.node.active=!0,t.popupFreeSpin.playAnimation(e,function(){t.popupFreeSpin.node.active=!1})}},1.5)},e.prototype.updateMoney=function(t){this.money+=t,u.default.numberTo(this.walletLabel,this.money,.3)},e.prototype.convertToMatrix=function(t,e,n){for(var o=[],i=0;i<e;i++)o.push(t.slice(i*n,(i+1)*n).map(function(t){return g[t]||t}));return o},r([b(cc.Node)],e.prototype,"machine",void 0),r([b(cc.Label)],e.prototype,"walletLabel",void 0),r([b(cc.Label)],e.prototype,"lblFreeSpin",void 0),r([b(cc.Label)],e.prototype,"betLabel",void 0),r([b(cc.Label)],e.prototype,"winLabel",void 0),r([b(cc.Label)],e.prototype,"fortuneLabel",void 0),r([b(cc.Label)],e.prototype,"grandLabel",void 0),r([b(cc.Label)],e.prototype,"majorLabel",void 0),r([b(cc.Label)],e.prototype,"minorLabel",void 0),r([b(cc.Label)],e.prototype,"miniLabel",void 0),r([b(cc.Label)],e.prototype,"wayResultsLabel",void 0),r([b(cc.Button)],e.prototype,"changeMoneyBetBtn",void 0),r([b(cc.Button)],e.prototype,"addMoneyBtn",void 0),r([b(cc.Button)],e.prototype,"subMoneyBtn",void 0),r([b(cc.Vec2)],e.prototype,"machineSize",void 0),r([b(cc.AudioClip)],e.prototype,"audioClick",void 0),r([b(cc.AudioClip)],e.prototype,"uiClick",void 0),r([b(cc.AudioClip)],e.prototype,"winSound",void 0),r([b(f.default)],e.prototype,"popupFreeSpin",void 0),r([y],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/BroadcastReceiver":void 0,"../../Lobby/LobbyScript/Script/common/Tween":void 0,"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"../../Lobby/LobbyScript/Script/networks/SlotNetworkClient":void 0,"./Dragon.Cmd":"Dragon.Cmd","./DuoFuFreeSpin":"DuoFuFreeSpin"}],DuoFuFreeSpin:[function(t,e,n){"use strict";cc._RF.push(e,"935f7ej9pBN4JarI5prSOVY","DuoFuFreeSpin");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lstBoard=[],e.overlay=null,e._callback=null,e._selectedItemIdx=0,e}return i(e,t),e.prototype.onShow=function(){},e.prototype.playAnimation=function(t,e){var n=this;this._callback=e,this._selectedItemIdx=t.option-1;var o=7,i=3/o,r=-1,c=this.getRandomIntExcluding(0,this.lstBoard.length-1,r),a=!1,l=function(){o>0&&(1===o&&(a=!0,c=n._selectedItemIdx),console.warn(n._selectedItemIdx),cc.tween(n.lstBoard[c]).to(i/2,{scaleX:1.1,scaleY:1.1}).to(i/2,{scaleX:a?1.1:1,scaleY:a?1.1:1}).call(function(){if(o--,a)n.playEffectGetItem();else{var t=n.getRandomIntExcluding(0,n.lstBoard.length-1,c,n._selectedItemIdx);r=c,c=t}l()}).start())};l()},e.prototype.playEffectGetItem=function(){var t=this;cc.tween(this.lstBoard[this._selectedItemIdx]).parallel(cc.tween().to(1,{position:cc.v2(0,0)}),cc.tween().to(1,{scaleX:1.65,scaleY:1.65})).call(function(){cc.tween(t.node).to(1,{opacity:0}).call(function(){t._callback()}).start()}).start()},e.prototype.getRandomIntExcluding=function(t,e){for(var n,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];do{n=Math.floor(Math.random()*(e-t+1))+t}while(o.includes(n));return n},r([l([cc.Node])],e.prototype,"lstBoard",void 0),r([l(cc.Node)],e.prototype,"overlay",void 0),r([a],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],Machine:[function(t,e,n){"use strict";cc._RF.push(e,"e75a3lPjzhNLb8z3HrM6PP0","Machine");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../SlotEnum"),a=cc._decorator,l=a.ccclass,u=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.button=null,e._reelPrefab=null,e.wildPrefab=null,e.coinPrefab=null,e.listWild=null,e.wildAppear=null,e.wildStanding=null,e.coinFly=null,e.coinSpawn=null,e.spinSound=null,e._numberOfReels=3,e.reels=[],e.spinning=!1,e.soundSpinID=0,e}return i(e,t),Object.defineProperty(e.prototype,"reelPrefab",{get:function(){return this._reelPrefab},set:function(t){this._reelPrefab=t,this.node.removeAllChildren(),null!==t&&this.createMachine()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberOfReels",{get:function(){return this._numberOfReels},set:function(t){this._numberOfReels=t,null!==this.reelPrefab&&this.createMachine()},enumerable:!1,configurable:!0}),e.prototype.createMachine=function(){var t;this.node.destroyAllChildren(),this.reels=[];for(var e=0;e<this.numberOfReels;e+=1){t=cc.instantiate(this.reelPrefab),this.node.addChild(t),this.reels[e]=t;var n=t.getComponent("Reel");n.shuffle(),n.reelAnchor.getComponent(cc.Layout).enabled=!1}this.node.getComponent(cc.Widget).updateAlignment()},e.prototype.spin=function(){this.spinning=!0,this.button.getChildByName("icon1").active=!1,this.button.getChildByName("icon2").active=!0,this.soundSpinID=cc.audioEngine.play(this.spinSound,!1,1);for(var t=0;t<this.numberOfReels;t+=1){var e=this.reels[t].getComponent("Reel");e.spinDirection=c.default.Direction.Down,e.doSpin(.03*t)}},e.prototype.lock=function(){this.button.getComponent(cc.Button).interactable=!1,this.button.getChildByName("icon3").active=!0},e.prototype.stop=function(t){var e=this;setTimeout(function(){e.spinning=!1,e.button.getComponent(cc.Button).interactable=!0,e.button.getChildByName("icon2").active=!1,e.button.getChildByName("icon1").active=!0,e.button.getChildByName("icon3").active=!1,cc.audioEngine.stop(e.soundSpinID)},2500);for(var n=Math.random()/2,o=0;o<this.numberOfReels;o+=1){var i=o<2+n?o/4:n*(o-2)+o/4,r=this.reels[o].getComponent("Reel");this.stopReel(r,t[o],i)}},e.prototype.stopReel=function(t,e,n){if(e)var o=e.slice();else o=null;return new Promise(function(){setTimeout(function(){t.readyStop(o)},500*n)})},e.prototype.createWild=function(t){for(var e=this,n=0;n<t.length;n++)for(var o=function(o){if("Red Wild"==t[n][o]){var r=cc.instantiate(i.wildPrefab);i.listWild.addChild(r),cc.audioEngine.play(i.wildAppear,!1,1),cc.tween(r).set({active:!0,position:cc.v3(-800,0)}).to(.5,{position:cc.v3(i.reels[n].x,144-144*o)}).call(function(){r.getChildByName("icon1").active=!1,r.getChildByName("icon2").active=!0,r.getChildByName("efx").active=!0,r.getChildByName("efx2").active=!0,e.collectcoin(r.position.add(cc.v3(30,-50)),cc.v3(-130,300)),e.collectcoin(r.position.add(cc.v3(30,-50)),cc.v3(130,300)),cc.audioEngine.play(e.wildStanding,!1,1)}).start()}},i=this,r=0;r<t[n].length;r++)o(r)},e.prototype.moveWild=function(){this.listWild.children.length>0&&this.listWild.children.forEach(function(t){cc.tween(t).to(.25,{position:cc.v3(t.x,t.y+144)}).call(function(){t.y>144&&t.destroy()}).start()})},e.prototype.spawnCoin=function(){var t=this;this.listWild.children.length>0&&this.listWild.children.forEach(function(e){e.y<=144&&(t.collectcoin(e.position.add(cc.v3(30,-50)),cc.v3(-130,330)),t.collectcoin(e.position.add(cc.v3(30,-50)),cc.v3(130,330)))})},e.prototype.showEfx=function(t){var e=this;if(t.length>0)for(var n=function(n){t[n].pos.forEach(function(o){o[0]<t[n].row&&e.reels[o[0]].getChildByName("In").children.forEach(function(t){Math.round(t.y)==144-144*o[1]&&cc.tween(t).delay(.25+.5*n).repeat(2,cc.tween(t).to(.2,{opacity:200,scale:1.1}).to(.2,{opacity:255,scale:1})).start()})})},o=0;o<t.length;o++)n(o)},e.prototype.collectcoin=function(t,e){var n=t;cc.audioEngine.play(this.coinSpawn,!1,1),cc.audioEngine.play(this.coinFly,!1,1);for(var o=function(){var o=cc.instantiate(i.coinPrefab);i.node.parent.parent.addChild(o),o.setPosition(n);var r=Math.floor(51*Math.random()-20),c=Math.floor(51*Math.random()-20);cc.tween(o).to(.2,{position:t.add(cc.v3(r,c))}).start(),i.scheduleOnce(function(){o.stopAllActions();var t=o.position,n=e,i=t.sub(n).mag()/1e3;cc.tween(o).to(i,{position:n}).call(function(){o.getChildByName("icon").active=!1,o.getChildByName("efx").active=!0}).delay(.28).call(function(){o.destroy()}).start()},.4)},i=this,r=0;r<4;r++)o()},r([u(cc.Node)],e.prototype,"button",void 0),r([u(cc.Prefab)],e.prototype,"_reelPrefab",void 0),r([u(cc.Prefab)],e.prototype,"wildPrefab",void 0),r([u(cc.Prefab)],e.prototype,"coinPrefab",void 0),r([u(cc.Node)],e.prototype,"listWild",void 0),r([u(cc.AudioClip)],e.prototype,"wildAppear",void 0),r([u(cc.AudioClip)],e.prototype,"wildStanding",void 0),r([u(cc.AudioClip)],e.prototype,"coinFly",void 0),r([u(cc.AudioClip)],e.prototype,"coinSpawn",void 0),r([u(cc.AudioClip)],e.prototype,"spinSound",void 0),r([u({type:cc.Prefab})],e.prototype,"reelPrefab",null),r([u({type:cc.Integer})],e.prototype,"_numberOfReels",void 0),r([u({type:cc.Integer,range:[3,6],slide:!0})],e.prototype,"numberOfReels",null),r([l],e)}(cc.Component);n.default=s,cc._RF.pop()},{"../SlotEnum":"SlotEnum"}],MiniGameDuofu:[function(t,e,n){"use strict";cc._RF.push(e,"99850baY7tDeJRdYrUYSX9D","MiniGameDuofu");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.start=function(){},r([l(cc.Label)],e.prototype,"label",void 0),r([l],e.prototype,"text",void 0),r([a],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],Reel:[function(t,e,n){"use strict";cc._RF.push(e,"91e54zzGJ5Os6qxY73m4+B5","Reel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../SlotEnum"),a=cc._decorator,l=a.ccclass,u=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reelAnchor=null,e.spinDirection=c.default.Direction.Down,e.tiles=[],e._tilePrefab=null,e.result=[],e.stopSpinning=!1,e}return i(e,t),Object.defineProperty(e.prototype,"tilePrefab",{get:function(){return this._tilePrefab},set:function(t){this._tilePrefab=t,this.reelAnchor.removeAllChildren(),this.tiles=[],null!==t&&this.createReel()},enumerable:!1,configurable:!0}),e.prototype.createReel=function(){for(var t,e=0;e<5;e+=1)t=cc.instantiate(this.tilePrefab),this.reelAnchor.addChild(t),this.tiles[e]=t},e.prototype.shuffle=function(){for(var t=0;t<this.tiles.length;t+=1)this.tiles[t].getComponent("Tile").setRandom()},e.prototype.readyStop=function(t){var e=this.spinDirection===c.default.Direction.Down||null==t;this.result=e?t:t.reverse(),this.stopSpinning=!0},e.prototype.changeCallback=function(t){void 0===t&&(t=null);var e=t,n=this.spinDirection===c.default.Direction.Down?-1:1;if(e.position.y*n>288){e.position=cc.v3(0,-288*n);var o=null;null!=this.result&&this.result.length>0&&(o=this.result.pop()),null!=o&&""!=o?e.getComponent("Tile").setTile(o):e.getComponent("Tile").setRandom()}},e.prototype.checkEndCallback=function(t){void 0===t&&(t=null);var e=t;this.stopSpinning?(e.stopAllActions(),this.doStop(e)):this.doSpinning(e)},e.prototype.doSpin=function(t){var e=this;this.stopSpinning=!1,this.reelAnchor.children.forEach(function(n){var o=e.spinDirection===c.default.Direction.Down?-1:1,i=cc.tween(n).delay(t),r=cc.tween(n).by(.25,{position:cc.v2(0,144*o)},{easing:"backIn"}),a=cc.tween().call(function(){return e.changeCallback(n)}),l=cc.tween(n).call(function(){return e.doSpinning(n,3)});i.then(r).then(a).then(l).start()})},e.prototype.doSpinning=function(t,e){var n=this;void 0===t&&(t=null),void 0===e&&(e=1);var o=this.spinDirection===c.default.Direction.Down?-1:1,i=cc.tween().by(.04,{position:cc.v2(0,144*o)}),r=cc.tween().call(function(){return n.changeCallback(t)}),a=cc.tween(t).repeat(e,i.then(r)),l=cc.tween().call(function(){return n.checkEndCallback(t)});a.then(l).start()},e.prototype.doStop=function(t){var e=this;void 0===t&&(t=null);var n=this.spinDirection===c.default.Direction.Down?-1:1,o=cc.tween(t).by(.04,{position:cc.v3(0,144*n)}),i=cc.tween().call(function(){return e.changeCallback(t)}),r=cc.tween().by(.2,{position:cc.v2(0,144*n)},{easing:"bounceOut"}).call(function(){});o.then(i).then(o).then(i).then(r).then(i).start()},r([u({type:cc.Node})],e.prototype,"reelAnchor",void 0),r([u({type:cc.Enum(c.default.Direction)})],e.prototype,"spinDirection",void 0),r([u({type:[cc.Node],visible:!0})],e.prototype,"tiles",void 0),r([u({type:cc.Prefab})],e.prototype,"_tilePrefab",void 0),r([u({type:cc.Prefab})],e.prototype,"tilePrefab",null),r([l],e)}(cc.Component);n.default=s,cc._RF.pop()},{"../SlotEnum":"SlotEnum"}],SlotEnum:[function(t,e,n){"use strict";cc._RF.push(e,"cbbb2wH3jBHYJaS87r8RQdn","SlotEnum");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c,a=cc._decorator.ccclass;(function(t){t[t.Up=0]="Up",t[t.Down=1]="Down"})(c||(c={}));var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.Direction=c,r([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],Tile:[function(t,e,n){"use strict";cc._RF.push(e,"23da8goMpRLyoF0XDrNCKrG","Tile");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setRandom=function(){var t=this,e=Math.floor(8*Math.random());this.node.children.forEach(function(n,o){o==e?(n.active=!0,t.node.name=n.name):n.active=!1})},e.prototype.setTile=function(t){var e=this;this.node.children.forEach(function(n){n.name==t?(n.active=!0,e.node.name=n.name):n.active=!1})},r([a],e)}(cc.Component));n.default=l,cc._RF.pop()},{}]},{},["Dragon.Cmd","DragonController","DuoFuFreeSpin","MiniGameDuofu","SlotEnum","Machine","Reel","Tile"]);