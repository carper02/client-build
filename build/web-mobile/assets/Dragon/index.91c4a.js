window.__require=function t(e,n,o){function i(c,l){if(!n[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!l&&u)return u(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var s=n[c]={exports:{}};e[c][0].call(s.exports,function(t){return i(e[c][1][t]||t)},s,s.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({"Dragon.Cmd":[function(t,e,n){"use strict";cc._RF.push(e,"22d21UcOBRPArzlLWsd0ynQ","Dragon.Cmd");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.cmd=void 0;var r,c=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),l=t("../../Lobby/LobbyScript/Script/networks/Network.OutPacket");cc._decorator.ccclass,function(t){var e=function(t){function e(e){var n=t.call(this,e)||this;return n.ngayX2="",n.remain=0,n.currentMoney=0,n.freeSpin=0,n.lines="",n.currentRoom=0,n.ngayX2=n.getString(),n.remain=n.getByte(),n.currentMoney=n.getLong(),n.freeSpin=n.getByte(),n.lines=n.getString(),n.currentRoom=n.getByte(),n}return i(e,t),e}(c.default);t.ReceiveDateX2=e;var n=function(t){function e(e){var n=t.call(this,e)||this;return n.freeSpin=0,n.freeSpin=n.getByte(),n}return i(e,t),e}(c.default);t.ReceiveFreeDaiLy=n;var o=function(){function t(){}return t.SUBCRIBE=17003,t.UNSUBCRIBE=17004,t.CHANGE_ROOM=17005,t.PLAY=17001,t.UPDATE_POT=17002,t.AUTO=17006,t.FORCE_STOP_AUTO=17008,t.DATE_X2=17009,t.BIG_WIN=17010,t.FREE=17011,t.FREE_DAI_LY=17012,t.MINIMIZE=17013,t.UPDATE_JACKPOT_SLOTS=10003,t.SUBCRIBE_HALL_SLOT=10001,t}();t.Code=o;var r=function(t){function e(e){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(o.SUBCRIBE),n.packHeader(),n.putByte(e),n.updateSize(),n}return i(e,t),e}(l.default);t.SendSubcribe=r;var a=function(t){function e(e){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(o.UNSUBCRIBE),n.packHeader(),n.putByte(e),n.updateSize(),n}return i(e,t),e}(l.default);t.SendUnSubcribe=a;var u=function(t){function e(e){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(o.PLAY),n.packHeader(),n.putString(e),n.updateSize(),n}return i(e,t),e}(l.default);t.SendPlay=u;var s=function(t){function e(e,n){var i=t.call(this)||this;return cc.log("room leave: "+e+", room join: "+n),i.initData(100),i.setControllerId(1),i.setCmdId(o.CHANGE_ROOM),i.packHeader(),i.putByte(e),i.putByte(n),i.updateSize(),i}return i(e,t),e}(l.default);t.SendChangeRoom=s;var p=function(t){function e(e){var n=t.call(this,e)||this;return n.jackpot=0,n.x2=0,n.jackpot=n.getLong(),n.x2=n.getByte(),n}return i(e,t),e}(c.default);t.ReceiveUpdatePot=p;var d=function(t){function e(e){var n=t.call(this,e)||this;return n.pots="",n.pots=n.getString(),n}return i(e,t),e}(c.default);t.ResUpdateJackpotSlots=d;var f=function(t){function e(e){var n=t.call(this,e)||this;return n.ref=0,n.result=0,n.matrix="",n.linesWin="",n.haiSao="",n.prize=0,n.currentMoney=0,n.freeSpin=0,n.isFree=!1,n.itemsWild="",n.ratio=0,n.currentNumberFreeSpin=0,n.ref=n.getLong(),n.result=n.getByte(),n.matrix=n.getString(),n.linesWin=n.getString(),n.haiSao=n.getString(),n.prize=n.getLong(),n.currentMoney=n.getLong(),n.freeSpin=n.getByte(),n.isFree=n.getBool(),n.itemsWild=n.getString(),n.ratio=n.getByte(),n.currentNumberFreeSpin=n.getByte(),n}return i(e,t),e}(c.default);t.ReceivePlay=f;var h=function(t){function e(){var e=t.call(this)||this;return e.initData(100),e.setControllerId(1),e.setCmdId(o.SUBCRIBE_HALL_SLOT),e.packHeader(),e.updateSize(),e}return i(e,t),e}(l.default);t.ReqSubcribeHallSlot=h}(r=n.cmd||(n.cmd={})),n.default=r,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"../../Lobby/LobbyScript/Script/networks/Network.OutPacket":void 0}],DragonController:[function(t,e,n){"use strict";cc._RF.push(e,"7462271VdFN4J38ivhu1fP1","DragonController");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function l(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,l)}a((o=o.apply(t,e||[])).next())})},l=this&&this.__generator||function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(t){return function(e){return a([t,e])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(l){r=[6,l],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)c.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return c};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../Loading/src/Configs"),p=t("../../Lobby/LobbyScript/Script/common/App"),d=t("../../Lobby/LobbyScript/Script/common/BroadcastReceiver"),f=t("../../Lobby/LobbyScript/Script/common/Tween"),h=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),y=t("../../Lobby/LobbyScript/Script/networks/SlotNetworkClient"),b=t("./Dragon.Cmd"),v=t("./DragonSlotLobby"),g=cc._decorator,m=g.ccclass,S=g.property,_={Q:{3:.05,4:.1,5:.15},K:{3:.05,4:.1,5:.15},A:{3:.05,4:.1,5:.15},Turtle:{3:.1,4:.15,5:.25},Fish:{3:.1,4:.15,5:.25},Bird:{3:.1,4:.15,5:.25},Tiger:{3:.1,4:.15,5:.25},Dragon:{3:.15,4:.25,5:.4}},w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.betIdx=-1,e.machine=null,e.walletLabel=null,e.moneyBetLabel=null,e.winLabel=null,e.fortuneLabel=null,e.grandLabel=null,e.majorLabel=null,e.minorLabel=null,e.miniLabel=null,e.wayResultsLabel=null,e.changeMoneyBetBtn=null,e.addMoneyBtn=null,e.subMoneyBtn=null,e.machineSize=cc.v2(3,5),e.mSlotLobby=null,e.audioClick=null,e.uiClick=null,e.winSound=null,e.block=!1,e.result=null,e.listBetLabel=["100","1000","10000"],e.probability=[50,33,10,7],e.grid=[],e.grid2=[],e.currentWilds=[],e.wildType="Red Wild",e.spinCount=1,e.cost=.88,e.win=0,e.betCount=1,e.symbolEatArr=[],e.arrResult=[],e}return i(e,t),e.prototype.start=function(){var t=this;this.machine.getComponent("Machine").createMachine(),this.createEmptyGrid(),y.default.getInstance().addOnClose(function(){t.mSlotLobby.onBtnBack()},this),y.default.getInstance().addListener(function(e){switch(new h.default(e).getCmdId()){case b.default.Code.FREE_DAI_LY:if(!t.mIsTrial){var n=new b.default.ReceiveFreeDaiLy(e);cc.log("init info Slot11:"+JSON.stringify(n))}break;case b.default.Code.DATE_X2:var o=new b.default.ReceiveDateX2(e);cc.log("init info DuoFuDuoCai Slot:"+JSON.stringify(o));break;case b.default.Code.UPDATE_POT:var i=new b.default.ReceiveUpdatePot(e);cc.log(i);break;case b.default.Code.UPDATE_JACKPOT_SLOTS:t.mSlotLobby.onUpdateJackpot(e);break;case b.default.Code.PLAY:var r=new b.default.ReceivePlay(e);cc.log(r)}},this),y.default.getInstance().sendCheck(new b.default.ReqSubcribeHallSlot),d.default.register(d.default.USER_UPDATE_COIN,function(){f.default.numberTo(t.walletLabel,s.default.Login.Coin,.3),t.money=s.default.Login.Coin},this),d.default.send(d.default.USER_UPDATE_COIN),p.default.instance.showErrLoading("\u0110ang k\u1ebft n\u1ed1i t\u1edbi server..."),y.default.getInstance().checkConnect(function(){p.default.instance.showLoading(!1)}),this.mSlotLobby.init(this),this.mSlotLobby.node.active=!0},e.prototype.update=function(){this.block&&null!=this.result&&(this.informStop(),this.result=null),1==this.betCount?this.subMoneyBtn.interactable=!1:13==this.betCount?this.addMoneyBtn.interactable=!1:(this.subMoneyBtn.interactable=!0,this.addMoneyBtn.interactable=!0)},e.prototype.onBtnBack=function(){y.default.getInstance().send(new b.default.SendUnSubcribe(this.betIdx)),cc.audioEngine.stopAll(),p.default.instance.loadScene("Lobby")},e.prototype.onJoinRoom=function(){this.moneyBetLabel.string=this.listBetLabel[this.betIdx]},e.prototype.onBtnChangeMoneyBet=function(){cc.audioEngine.play(this.uiClick,!1,1),this.changeMoneyBetBtn.interactable=!1,this.subMoneyBtn.node.parent.active=!0},e.prototype.onCloseBtnChangeMoneyBet=function(){cc.audioEngine.play(this.uiClick,!1,1),this.subMoneyBtn.node.parent.active=!1,this.changeMoneyBetBtn.interactable=!0},e.prototype.changeMoneyBet=function(t,e){cc.audioEngine.play(this.uiClick,!1,1),this.betCount+=parseInt(e),f.default.numberTo(this.fortuneLabel,1e7*this.betCount,.3),f.default.numberTo(this.grandLabel,15e5*this.betCount,.3),f.default.numberTo(this.majorLabel,4e4*this.betCount,.3),f.default.numberTo(this.minorLabel,2e4*this.betCount,.3),f.default.numberTo(this.miniLabel,1e4*this.betCount,.3)},e.prototype.createEmptyGrid=function(){this.grid=Array.from({length:5},function(){return Array(3).fill(null)}),this.grid2=Array.from({length:5},function(){return Array(3).fill(null)})},e.prototype.click=function(){var t=this;cc.audioEngine.play(this.audioClick,!1,1),!1===this.machine.getComponent("Machine").spinning?(this.win=0,this.winLabel.string=this.win.toString(),this.symbolEatArr=[],this.arrResult=[],this.addMoney(-this.moneyBetLabel.string),this.block=!1,this.machine.getComponent("Machine").spin(),this.subMoneyBtn.node.parent.active=!1,this.changeMoneyBetBtn.interactable=!1,this.requestResult(),this.moveWildsUp(),this.spinCount%3==0&&this.generateWildPositions(),this.machine.getComponent("Machine").moveWild(),this.populateGrid(),this.spinCount%3==0&&this.machine.getComponent("Machine").createWild(this.grid),console.log(this.grid),this.countConsecutiveOccurrences(this.grid),this.spinCount++,this.schedule(function(){!0===t.machine.getComponent("Machine").spinning&&(t.informStop(),t.machine.getComponent("Machine").lock())},2)):this.block||(this.block=!0,this.machine.getComponent("Machine").lock())},e.prototype.generateWildPositions=function(){for(var t=[],e=Math.floor(5*Math.random()+1),n=0;n<e;n++){var o=Math.floor(3*Math.random()),i=Math.floor(3*Math.random())+2;t.push({row:i,col:o})}this.currentWilds=t},e.prototype.moveWildsUp=function(){this.currentWilds=this.currentWilds.map(function(t){return{row:t.row,col:t.col-1}}).filter(function(t){return t.col>=0})},e.prototype.requestResult=function(){return c(this,void 0,Promise,function(){var t;return l(this,function(e){switch(e.label){case 0:return this.result=null,t=this,[4,this.getAnswer()];case 1:return t.result=e.sent(),[2]}})})},e.prototype.getAnswer=function(){var t=this;return new Promise(function(e){setTimeout(function(){e(t.grid)},1e3+500*Math.random())})},e.prototype.informStop=function(){var t=this,e=this.grid2;this.machine.getComponent("Machine").stop(e),this.unscheduleAllCallbacks(),setTimeout(function(){t.machine.getComponent("Machine").showEfx(t.symbolEatArr),t.addMoney(t.win),t.winLabel.string=t.win.toString(),t.changeMoneyBetBtn.interactable=!0,t.arrResult.forEach(function(e,n){t.scheduleOnce(function(){t.wayResultsLabel.string=e},1*n),0==n&&cc.tween(t.wayResultsLabel.node.parent).set({active:!0,scale:0}).to(.1,{scale:.9}).delay(2).to(.1,{scale:0}).start()}),(t.spinCount-1)%3!=0&&t.machine.getComponent("Machine").spawnCoin(),t.arrResult.length>0&&cc.audioEngine.play(t.winSound,!1,1)},1500)},e.prototype.populateGrid=function(){var t=this,e=["Q","K","A","Turtle","Fish","Bird","Tiger","Dragon"],n={Q:18,K:18,A:18,Turtle:10,Fish:10,Bird:10,Tiger:10,Dragon:6};this.grid.forEach(function(o,i){o.forEach(function(o,r){if(t.currentWilds.some(function(t){return t.row===i&&t.col===r})){var c=t.randomSymbol(e,n);t.grid[i][r]=t.wildType,t.grid2[i][r]=c}else c=t.randomSymbol(e,n),t.grid[i][r]=c,t.grid2[i][r]=c})})},e.prototype.randomSymbol=function(t,e){var n,o,i=Number(Object.values(e).reduce(function(t,e){return t+e},0)),r=Math.random()*i,c=0;try{for(var l=a(t),u=l.next();!u.done;u=l.next()){var s=u.value;if(r<(c+=e[s]))return s}}catch(p){n={error:p}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return t[t.length-1]},e.prototype.countConsecutiveOccurrences=function(t){for(var e,n,o,i,r,c,l={},s=function(e){t[e].forEach(function(t,n){l[t]||(l[t]={counts:[],rows:[],positions:[]}),l[t].counts[e]=(l[t].counts[e]||0)+1,l[t].positions.push([e,n]),l[t].rows.includes(e+1)||l[t].rows.push(e+1)})},p=0;p<t.length;p++)s(p);try{for(var d=a(Object.entries(l)),f=d.next();!f.done;f=d.next()){var h=u(f.value,2),y=h[0],b=h[1];if("Red Wild"!==y&&l["Red Wild"]){var v=l["Red Wild"].rows;try{for(var g=(o=void 0,a(v)),m=g.next();!m.done;m=g.next()){var S=m.value;b.rows.includes(S)?b.counts[S-1]=b.counts[S-1]+l["Red Wild"].counts[S-1]:(b.rows.push(S),b.counts[S-1]=b.counts[S-1]||l["Red Wild"].counts[S-1])}}catch(j){o={error:j}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}b.rows.sort(function(t,e){return t-e})}}}catch(I){e={error:I}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}try{for(var w=a(Object.entries(l)),C=w.next();!C.done;C=w.next()){var L=u(C.value,2),R=(y=L[0],(b=L[1]).counts),O=b.rows,P=b.positions;if(1===O[0]){var B=1,k=R[0],D=0,E=0,A=[];for(p=1;p<O.length;p++){if(O[p]!==O[p-1]+1){B=1,k=R[p];break}B++,k*=R[p],B>E&&(E=B,D=k,A=P)}if(E>=3){console.log('Element "'+y+'" appears in '+E+" consecutive rows."),console.log("Product of counts in consecutive rows: "+D),this.symbolEatArr.push({name:y,pos:A,row:E});var M=_[y][E]*D*this.betCount;this.win+=M,this.arrResult.push(D+" Way Pays $"+M.toFixed(2))}}}}catch(T){r={error:T}}finally{try{C&&!C.done&&(c=w.return)&&c.call(w)}finally{if(r)throw r.error}}},e.prototype.addMoney=function(t){this.money+=t,f.default.numberTo(this.walletLabel,this.money,.3)},r([S(cc.Node)],e.prototype,"machine",void 0),r([S(cc.Label)],e.prototype,"walletLabel",void 0),r([S(cc.Label)],e.prototype,"moneyBetLabel",void 0),r([S(cc.Label)],e.prototype,"winLabel",void 0),r([S(cc.Label)],e.prototype,"fortuneLabel",void 0),r([S(cc.Label)],e.prototype,"grandLabel",void 0),r([S(cc.Label)],e.prototype,"majorLabel",void 0),r([S(cc.Label)],e.prototype,"minorLabel",void 0),r([S(cc.Label)],e.prototype,"miniLabel",void 0),r([S(cc.Label)],e.prototype,"wayResultsLabel",void 0),r([S(cc.Button)],e.prototype,"changeMoneyBetBtn",void 0),r([S(cc.Button)],e.prototype,"addMoneyBtn",void 0),r([S(cc.Button)],e.prototype,"subMoneyBtn",void 0),r([S(cc.Vec2)],e.prototype,"machineSize",void 0),r([S(v.default)],e.prototype,"mSlotLobby",void 0),r([S(cc.AudioClip)],e.prototype,"audioClick",void 0),r([S(cc.AudioClip)],e.prototype,"uiClick",void 0),r([S(cc.AudioClip)],e.prototype,"winSound",void 0),r([m],e)}(cc.Component);n.default=w,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/BroadcastReceiver":void 0,"../../Lobby/LobbyScript/Script/common/Tween":void 0,"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"../../Lobby/LobbyScript/Script/networks/SlotNetworkClient":void 0,"./Dragon.Cmd":"Dragon.Cmd","./DragonSlotLobby":"DragonSlotLobby"}],DragonSlotLobby:[function(t,e,n){"use strict";cc._RF.push(e,"630b0y/rktCZ6YOf3wDTBQC","DragonSlotLobby");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/Tween"),a=t("../../Lobby/LobbyScript/Script/networks/SlotNetworkClient"),u=t("./Dragon.Cmd"),s=cc._decorator,p=s.ccclass,d=s.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listPot=[],e.mSlotController=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.init=function(t){this.mSlotController=t,this.node.zIndex=2},e.prototype.onBtnBack=function(){c.default.instance.showLoading(!0),a.default.getInstance().send(new u.default.SendUnSubcribe(this.mSlotController.betIdx)),cc.audioEngine.stopAll(),c.default.instance.loadScene("Lobby")},e.prototype.onBtn100=function(){this.mSlotController.betIdx=0,a.default.getInstance().send(new u.default.SendSubcribe(this.mSlotController.betIdx)),this.node.active=!1,this.mSlotController.onJoinRoom()},e.prototype.onBtn5k=function(){this.mSlotController.betIdx=1,a.default.getInstance().send(new u.default.SendSubcribe(this.mSlotController.betIdx)),this.node.active=!1,this.mSlotController.onJoinRoom()},e.prototype.onBtn10k=function(){this.mSlotController.betIdx=2,a.default.getInstance().send(new u.default.SendSubcribe(this.mSlotController.betIdx)),this.node.active=!1,this.mSlotController.onJoinRoom()},e.prototype.onUpdateJackpot=function(t){var e=new u.default.ResUpdateJackpotSlots(t),n=JSON.parse(e.pots);l.default.numberTo(this.listPot[0],n.benley[100].p,3),l.default.numberTo(this.listPot[1],n.benley[1e3].p,3),l.default.numberTo(this.listPot[2],n.benley[1e4].p,3)},r([d([cc.Label])],e.prototype,"listPot",void 0),r([p],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Tween":void 0,"../../Lobby/LobbyScript/Script/networks/SlotNetworkClient":void 0,"./Dragon.Cmd":"Dragon.Cmd"}],Machine:[function(t,e,n){"use strict";cc._RF.push(e,"e75a3lPjzhNLb8z3HrM6PP0","Machine");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../SlotEnum"),l=cc._decorator,a=l.ccclass,u=l.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.button=null,e._reelPrefab=null,e.wildPrefab=null,e.coinPrefab=null,e.listWild=null,e.wildAppear=null,e.wildStanding=null,e.coinFly=null,e.coinSpawn=null,e.spinSound=null,e._numberOfReels=3,e.reels=[],e.spinning=!1,e.soundSpinID=0,e}return i(e,t),Object.defineProperty(e.prototype,"reelPrefab",{get:function(){return this._reelPrefab},set:function(t){this._reelPrefab=t,this.node.removeAllChildren(),null!==t&&this.createMachine()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberOfReels",{get:function(){return this._numberOfReels},set:function(t){this._numberOfReels=t,null!==this.reelPrefab&&this.createMachine()},enumerable:!1,configurable:!0}),e.prototype.createMachine=function(){var t;this.node.destroyAllChildren(),this.reels=[];for(var e=0;e<this.numberOfReels;e+=1){t=cc.instantiate(this.reelPrefab),this.node.addChild(t),this.reels[e]=t;var n=t.getComponent("Reel");n.shuffle(),n.reelAnchor.getComponent(cc.Layout).enabled=!1}this.node.getComponent(cc.Widget).updateAlignment()},e.prototype.spin=function(){this.spinning=!0,this.button.getChildByName("icon1").active=!1,this.button.getChildByName("icon2").active=!0,this.soundSpinID=cc.audioEngine.play(this.spinSound,!1,1);for(var t=0;t<this.numberOfReels;t+=1){var e=this.reels[t].getComponent("Reel");e.spinDirection=c.default.Direction.Down,e.doSpin(.03*t)}},e.prototype.lock=function(){this.button.getComponent(cc.Button).interactable=!1,this.button.getChildByName("icon3").active=!0},e.prototype.stop=function(t){var e=this;setTimeout(function(){e.spinning=!1,e.button.getComponent(cc.Button).interactable=!0,e.button.getChildByName("icon2").active=!1,e.button.getChildByName("icon1").active=!0,e.button.getChildByName("icon3").active=!1,cc.audioEngine.stop(e.soundSpinID)},2500);for(var n=Math.random()/2,o=0;o<this.numberOfReels;o+=1){var i=o<2+n?o/4:n*(o-2)+o/4,r=this.reels[o].getComponent("Reel");this.stopReel(r,t[o],i)}},e.prototype.stopReel=function(t,e,n){if(e)var o=e.slice();else o=null;return new Promise(function(){setTimeout(function(){t.readyStop(o)},500*n)})},e.prototype.createWild=function(t){for(var e=this,n=0;n<t.length;n++)for(var o=function(o){if("Red Wild"==t[n][o]){var r=cc.instantiate(i.wildPrefab);i.listWild.addChild(r),cc.audioEngine.play(i.wildAppear,!1,1),cc.tween(r).set({active:!0,position:cc.v3(-800,0)}).to(.5,{position:cc.v3(i.reels[n].x,144-144*o)}).call(function(){r.getChildByName("icon1").active=!1,r.getChildByName("icon2").active=!0,r.getChildByName("efx").active=!0,r.getChildByName("efx2").active=!0,e.collectcoin(r.position.add(cc.v3(30,-50)),cc.v3(-130,300)),e.collectcoin(r.position.add(cc.v3(30,-50)),cc.v3(130,300)),cc.audioEngine.play(e.wildStanding,!1,1)}).start()}},i=this,r=0;r<t[n].length;r++)o(r)},e.prototype.moveWild=function(){this.listWild.children.length>0&&this.listWild.children.forEach(function(t){cc.tween(t).to(.25,{position:cc.v3(t.x,t.y+144)}).call(function(){t.y>144&&t.destroy()}).start()})},e.prototype.spawnCoin=function(){var t=this;this.listWild.children.length>0&&this.listWild.children.forEach(function(e){e.y<=144&&(t.collectcoin(e.position.add(cc.v3(30,-50)),cc.v3(-130,330)),t.collectcoin(e.position.add(cc.v3(30,-50)),cc.v3(130,330)))})},e.prototype.showEfx=function(t){var e=this;if(t.length>0)for(var n=function(n){t[n].pos.forEach(function(o){o[0]<t[n].row&&e.reels[o[0]].getChildByName("In").children.forEach(function(t){Math.round(t.y)==144-144*o[1]&&cc.tween(t).delay(.25+.5*n).repeat(2,cc.tween(t).to(.2,{opacity:200,scale:1.1}).to(.2,{opacity:255,scale:1})).start()})})},o=0;o<t.length;o++)n(o)},e.prototype.collectcoin=function(t,e){var n=t;cc.audioEngine.play(this.coinSpawn,!1,1),cc.audioEngine.play(this.coinFly,!1,1);for(var o=function(){var o=cc.instantiate(i.coinPrefab);i.node.parent.parent.addChild(o),o.setPosition(n);var r=Math.floor(51*Math.random()-20),c=Math.floor(51*Math.random()-20);cc.tween(o).to(.2,{position:t.add(cc.v3(r,c))}).start(),i.scheduleOnce(function(){o.stopAllActions();var t=o.position,n=e,i=t.sub(n).mag()/1e3;cc.tween(o).to(i,{position:n}).call(function(){o.getChildByName("icon").active=!1,o.getChildByName("efx").active=!0}).delay(.28).call(function(){o.destroy()}).start()},.4)},i=this,r=0;r<4;r++)o()},r([u(cc.Node)],e.prototype,"button",void 0),r([u(cc.Prefab)],e.prototype,"_reelPrefab",void 0),r([u(cc.Prefab)],e.prototype,"wildPrefab",void 0),r([u(cc.Prefab)],e.prototype,"coinPrefab",void 0),r([u(cc.Node)],e.prototype,"listWild",void 0),r([u(cc.AudioClip)],e.prototype,"wildAppear",void 0),r([u(cc.AudioClip)],e.prototype,"wildStanding",void 0),r([u(cc.AudioClip)],e.prototype,"coinFly",void 0),r([u(cc.AudioClip)],e.prototype,"coinSpawn",void 0),r([u(cc.AudioClip)],e.prototype,"spinSound",void 0),r([u({type:cc.Prefab})],e.prototype,"reelPrefab",null),r([u({type:cc.Integer})],e.prototype,"_numberOfReels",void 0),r([u({type:cc.Integer,range:[3,6],slide:!0})],e.prototype,"numberOfReels",null),r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{"../SlotEnum":"SlotEnum"}],Reel:[function(t,e,n){"use strict";cc._RF.push(e,"91e54zzGJ5Os6qxY73m4+B5","Reel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../SlotEnum"),l=cc._decorator,a=l.ccclass,u=l.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reelAnchor=null,e.spinDirection=c.default.Direction.Down,e.tiles=[],e._tilePrefab=null,e.result=[],e.stopSpinning=!1,e}return i(e,t),Object.defineProperty(e.prototype,"tilePrefab",{get:function(){return this._tilePrefab},set:function(t){this._tilePrefab=t,this.reelAnchor.removeAllChildren(),this.tiles=[],null!==t&&(this.createReel(),this.shuffle())},enumerable:!1,configurable:!0}),e.prototype.createReel=function(){for(var t,e=0;e<5;e+=1)t=cc.instantiate(this.tilePrefab),this.reelAnchor.addChild(t),this.tiles[e]=t},e.prototype.shuffle=function(){for(var t=0;t<this.tiles.length;t+=1)this.tiles[t].getComponent("Tile").setRandom()},e.prototype.readyStop=function(t){var e=this.spinDirection===c.default.Direction.Down||null==t;this.result=e?t:t.reverse(),this.stopSpinning=!0},e.prototype.changeCallback=function(t){void 0===t&&(t=null);var e=t,n=this.spinDirection===c.default.Direction.Down?-1:1;if(e.position.y*n>288){e.position=cc.v3(0,-288*n);var o=null;null!=this.result&&this.result.length>0&&(o=this.result.pop()),null!=o&&""!=o?e.getComponent("Tile").setTile(o):e.getComponent("Tile").setRandom()}},e.prototype.checkEndCallback=function(t){void 0===t&&(t=null);var e=t;this.stopSpinning?(e.stopAllActions(),this.doStop(e)):this.doSpinning(e)},e.prototype.doSpin=function(t){var e=this;this.stopSpinning=!1,this.reelAnchor.children.forEach(function(n){var o=e.spinDirection===c.default.Direction.Down?-1:1,i=cc.tween(n).delay(t),r=cc.tween(n).by(.25,{position:cc.v2(0,144*o)},{easing:"backIn"}),l=cc.tween().call(function(){return e.changeCallback(n)}),a=cc.tween(n).call(function(){return e.doSpinning(n,3)});i.then(r).then(l).then(a).start()})},e.prototype.doSpinning=function(t,e){var n=this;void 0===t&&(t=null),void 0===e&&(e=1);var o=this.spinDirection===c.default.Direction.Down?-1:1,i=cc.tween().by(.04,{position:cc.v2(0,144*o)}),r=cc.tween().call(function(){return n.changeCallback(t)}),l=cc.tween(t).repeat(e,i.then(r)),a=cc.tween().call(function(){return n.checkEndCallback(t)});l.then(a).start()},e.prototype.doStop=function(t){var e=this;void 0===t&&(t=null);var n=this.spinDirection===c.default.Direction.Down?-1:1,o=cc.tween(t).by(.04,{position:cc.v3(0,144*n)}),i=cc.tween().call(function(){return e.changeCallback(t)}),r=cc.tween().by(.2,{position:cc.v2(0,144*n)},{easing:"bounceOut"}).call(function(){});o.then(i).then(o).then(i).then(r).then(i).start()},r([u({type:cc.Node})],e.prototype,"reelAnchor",void 0),r([u({type:cc.Enum(c.default.Direction)})],e.prototype,"spinDirection",void 0),r([u({type:[cc.Node],visible:!0})],e.prototype,"tiles",void 0),r([u({type:cc.Prefab})],e.prototype,"_tilePrefab",void 0),r([u({type:cc.Prefab})],e.prototype,"tilePrefab",null),r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{"../SlotEnum":"SlotEnum"}],SlotEnum:[function(t,e,n){"use strict";cc._RF.push(e,"cbbb2wH3jBHYJaS87r8RQdn","SlotEnum");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c,l=cc._decorator.ccclass;(function(t){t[t.Up=0]="Up",t[t.Down=1]="Down"})(c||(c={}));var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.Direction=c,r([l],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],Tile:[function(t,e,n){"use strict";cc._RF.push(e,"23da8goMpRLyoF0XDrNCKrG","Tile");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,l=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setRandom=function(){var t=this,e=Math.floor(8*Math.random());this.node.children.forEach(function(n,o){o==e?(n.active=!0,t.node.name=n.name):n.active=!1})},e.prototype.setTile=function(t){var e=this;this.node.children.forEach(function(n){n.name==t?(n.active=!0,e.node.name=n.name):n.active=!1})},r([l],e)}(cc.Component));n.default=a,cc._RF.pop()},{}]},{},["Dragon.Cmd","DragonController","DragonSlotLobby","SlotEnum","Machine","Reel","Tile"]);